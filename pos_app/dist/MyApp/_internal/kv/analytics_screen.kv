
<AnalyticsScreen>:
    name: 'analytics'

    BoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: "Аналитика"
            left_action_items: [["arrow-left", lambda x: setattr(root.manager, 'current', 'main')]]
            elevation: 2

        MDBoxLayout:
            orientation: 'vertical'
            padding: "8dp"
            spacing: "8dp"


            # Строка с периодом и датами
            MDBoxLayout:
                orientation: "horizontal"
                spacing: "8dp"
                size_hint_y: None
                height: "48dp"



                # Выбор конкретных дат
                MDLabel:
                    size_hint_x: None
                    width: "20dp"
                    halign: "center"

                MDLabel:
                    id: start_date_label
                    text: "01.01.2025"
                    halign: "center"

                MDIconButton:
                    icon: "calendar"
                    size_hint_x: None
                    width: "30dp"
                    on_release: root.show_date_picker('start')

                MDLabel:
                    size_hint_x: None
                    width: "30dp"
                    halign: "center"

                MDLabel:
                    id: end_date_label
                    text: "01.02.2025"
                    halign: "center"

                MDIconButton:
                    icon: "calendar"
                    size_hint_x: None
                    width: "30dp"
                    on_release: root.show_date_picker('end')


            # Кнопки типа отчета
            MDBoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: "48dp"
                spacing: "8dp"

                MDRaisedButton:
                    text: "Продажи"
                    size_hint_x: 0.5
                    on_release: root.load_sales_analytics()

                MDRaisedButton:
                    text: "Прибыль"
                    size_hint_x: 0.5
                    on_release: root.load_profit_analytics()

            # Результаты аналитики
            MDScrollView:
                do_scroll_x: False

                MDList:
                    id: analytics_results
                    padding: "4dp"