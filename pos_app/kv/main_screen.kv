<MainScreen>:
    name: 'main'

    BoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: "Мини POS Система"
            elevation: 2
            right_action_items: [["account-arrow-right", lambda x: root.logout()]]

        MDBoxLayout:
            orientation: 'vertical'
            padding: "16dp"
            spacing: "10dp"

            MDLabel:
                text: "Добро пожаловать, " + root.user_name
                halign: "center"
                font_style: "Subtitle1"
                size_hint_y: None
                height: self.texture_size[1]
                padding: [0, 10, 0, 10]  # Исправлено с padding_y

            MDLabel:
                text: "Выберите действие"
                halign: "center"
                font_style: "H6"
                size_hint_y: None
                height: self.texture_size[1]
                padding: [0, 10, 0, 10]  # Исправлено с padding_y

            MDSeparator:
                height: "1dp"

            Widget:
                size_hint_y: 0.1

            # Основные кнопки - большие и удобные для нажатия на мобильном
            MDCard:
                size_hint: None, None
                size: "280dp", "80dp"
                pos_hint: {"center_x": .5}
                md_bg_color: app.theme_cls.primary_color
                on_release:
                    app.scan_for_invoice = True
                    root.manager.current = 'scan_invoice'

                BoxLayout:
                    orientation: 'horizontal'
                    padding: "10dp"

                    MDIcon:
                        icon: "barcode-scan"
                        pos_hint: {"center_y": .5}
                        font_size: "30dp"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

                    MDLabel:
                        text: "СКАНИРОВАТЬ ТОВАР"
                        font_style: "H6"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

            MDCard:
                size_hint: None, None
                size: "280dp", "80dp"
                pos_hint: {"center_x": .5}
                md_bg_color: app.theme_cls.accent_color
                on_release: root.manager.current = 'inventory'

                BoxLayout:
                    orientation: 'horizontal'
                    padding: "10dp"

                    MDIcon:
                        icon: "warehouse"
                        pos_hint: {"center_y": .5}
                        font_size: "30dp"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

                    MDLabel:
                        text: "СКЛАД"
                        font_style: "H6"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1
            MDCard:
                size_hint: None, None
                size: "280dp", "80dp"
                pos_hint: {"center_x": .5}
                md_bg_color: 0.6, 0.3, 0.4, 1 # Пурпурный цвет для отличия
                on_release: root.manager.current = 'invoice_history'

                BoxLayout:
                    orientation: 'horizontal'
                    padding: "10dp"

                    MDIcon:
                        icon: "history"
                        pos_hint: {"center_y": .5}
                        font_size: "30dp"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

                    MDLabel:
                        text: "ИСТОРИЯ НАКЛАДНЫХ"
                        font_style: "H6"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1
            MDCard:
                size_hint: None, None
                size: "280dp", "80dp"
                pos_hint: {"center_x": .5}
                md_bg_color: 0.2, 0.6, 0.4, 1
                on_release: root.manager.current = 'analytics'

                BoxLayout:
                    orientation: 'horizontal'
                    padding: "10dp"

                    MDIcon:
                        icon: "chart-bar"
                        pos_hint: {"center_y": .5}
                        font_size: "30dp"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

                    MDLabel:
                        text: "АНАЛИТИКА"
                        font_style: "H6"
                        halign: "center"
                        theme_text_color: "Custom"
                        text_color: 1, 1, 1, 1

            Widget:
                size_hint_y: 0.2